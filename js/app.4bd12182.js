(function(){"use strict";var e={3786:function(e,t,n){n.d(t,{O:function(){return l}});var s=n(7797);const i="https://dszmaeqcdakyucdonsez.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzem1hZXFjZGFreXVjZG9uc2V6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzIzODUxMzgsImV4cCI6MTk4Nzk2MTEzOH0.-p7uNn_hdw0i6j5FANFYFKCGnU9Pn-QMwML10CLOXTM",l=(0,s.eI)(i,o)},4908:function(e,t,n){var s=n(9242),i=n(3396),o=n(7139);const l=e=>((0,i.dD)("data-v-83a2f504"),e=e(),(0,i.Cn)(),e),a=l((()=>(0,i._)("h1",null,"현금흐름 관리하기",-1))),r=[a],u={key:0},d={key:0},c={key:1},p=l((()=>(0,i._)("span",null," 버튼을 누르면, 편집모드가 종료됩니다.",-1))),m={key:0},y=l((()=>(0,i._)("span",null," *버튼을 눌러 로그인할 수 있습니다.",-1))),h={key:1};function g(e,t,n,s,l,a){const g=(0,i.up)("ListEditingView"),_=(0,i.up)("ReadingView");return(0,i.wg)(),(0,i.iD)("div",{class:(0,o.C_)(l.mainBodyDiv)},[(0,i._)("div",{class:(0,o.C_)(l.menuDiv)},[(0,i._)("div",{class:(0,o.C_)(l.titleDiv)},r,2),(0,i._)("div",{class:(0,o.C_)(l.subMenuGrid)},[(0,i._)("div",{class:(0,o.C_)(l.pageHanderDiv)},[l.mode?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>a.handlingMode&&a.handlingMode(...e))},"편집모드로 전환"),l.mode?((0,i.wg)(),(0,i.iD)("span",d," 버튼을 누르면, 내용을 편집할 수 있습니다.")):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",c,[(0,i._)("button",{onClick:t[1]||(t[1]=(...e)=>a.handlingMode&&a.handlingMode(...e))},"읽기모드로 전환"),p]))],2),(0,i._)("div",{class:(0,o.C_)(l.loginMenuDiv)},[e.loginMode?((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("button",{onClick:t[2]||(t[2]=(...t)=>e.loginGoogle&&e.loginGoogle(...t))},"구글 로그인"),y])):((0,i.wg)(),(0,i.iD)("div",h,[(0,i._)("span",null," 로그인 계정: "+(0,o.zw)(e.email)+" | ",1),(0,i._)("button",{onClick:t[3]||(t[3]=(...t)=>e.signout&&e.signout(...t))},"로그아웃")]))],2)],2)],2),(0,i._)("div",{class:(0,o.C_)(l.mainViewDiv)},[l.mode?((0,i.wg)(),(0,i.j4)(g,{key:0})):((0,i.wg)(),(0,i.j4)(_,{key:1}))],2)],2)}const _=e=>((0,i.dD)("data-v-7c0fd07c"),e=e(),(0,i.Cn)(),e),f=_((()=>(0,i._)("h2",null,"리스트 뷰",-1))),v=["onUpdate:modelValue"],w=_((()=>(0,i._)("span",null," : ",-1))),x=["onUpdate:modelValue"],C=["onUpdate:modelValue"],D=_((()=>(0,i._)("h2",null,"플로우 뷰",-1))),E=_((()=>(0,i._)("h2",null,"돈이 나가는 영역",-1))),b=_((()=>(0,i._)("span",null,"결정값 : ",-1))),S=["onUpdate:modelValue"],V=_((()=>(0,i._)("span",null,"계산값 : ",-1))),U=_((()=>(0,i._)("h3",null,"과거형 지출",-1))),k=_((()=>(0,i._)("span",null,"결정값 : ",-1))),O=["onUpdate:modelValue"],N=["onUpdate:modelValue"],I=_((()=>(0,i._)("span",null," : ",-1))),P=["onUpdate:modelValue"],L=_((()=>(0,i._)("h3",null,"현재형 지출",-1))),F=_((()=>(0,i._)("span",null,"결정값 : ",-1))),A=["onUpdate:modelValue"],M=["onUpdate:modelValue"],j=_((()=>(0,i._)("span",null," : ",-1))),B=["onUpdate:modelValue"],G=_((()=>(0,i._)("h3",null,"미래형 지출",-1))),H=_((()=>(0,i._)("span",null,"결정값 : ",-1))),T=["onUpdate:modelValue"],J=["onUpdate:modelValue"],K=_((()=>(0,i._)("span",null," : ",-1))),Y=["onUpdate:modelValue"];function z(e,t,n,l,a,r){const u=(0,i.up)("PieChart");return(0,i.wg)(),(0,i.iD)("div",{class:(0,o.C_)(a.sectionGrid)},[(0,i._)("div",{class:(0,o.C_)(a.listViewDiv)},[f,(0,i._)("div",{class:(0,o.C_)(a.listViewItemDiv)},[(0,i._)("ol",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.sortLevel3,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,v),[[s.nr,e.category]]),w,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,x),[[s.nr,e.amount]]),(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.parentsCategory=t,readonly:""},null,10,C),[[s.nr,e.parentsCategory]])])))),128))])],2)],2),(0,i._)("div",{class:(0,o.C_)(a.flowViewDiv)},[D,(0,i._)("div",{class:(0,o.C_)(a.unitDiv)},[(0,i._)("div",{class:(0,o.C_)(a.graphGrid)},[(0,i._)("div",null,[E,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortTotalExpenses,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[b,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,S),[[s.nr,e.amount]])])))),128)),(0,i._)("li",null,[V,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t[0]||(t[0]=e=>r.sumTotalExpenses=e),readonly:""},null,2),[[s.nr,r.sumTotalExpenses]])])])]),(0,i._)("div",{class:(0,o.C_)(a.graphDiv)},[(0,i.Wm)(u,{expenses:a.expenses},null,8,["expenses"])],2)],2)],2),(0,i._)("div",{class:(0,o.C_)(a.subGrid)},[(0,i._)("div",{class:(0,o.C_)(a.unitDiv)},[(0,i._)("div",null,[U,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortPastExpenses,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[k,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,O),[[s.nr,e.amount]])])))),128)),(0,i._)("li",null,[(0,i.Uk)("계산값 : "),(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t[1]||(t[1]=e=>r.sumPastExpenses=e),readonly:""},null,2),[[s.nr,r.sumPastExpenses]])])])]),(0,i._)("div",null,[(0,i._)("ol",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortParentsPastExpenses,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,N),[[s.nr,e.category]]),I,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,P),[[s.nr,e.amount]])])))),128))])])],2),(0,i._)("div",{class:(0,o.C_)(a.unitDiv)},[(0,i._)("div",null,[L,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortPresentExpenses,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[F,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,A),[[s.nr,e.amount]])])))),128)),(0,i._)("li",null,[(0,i.Uk)("계산값 : "),(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t[2]||(t[2]=e=>r.sumPresentExpenses=e),readonly:""},null,2),[[s.nr,r.sumPresentExpenses]])])])]),(0,i._)("div",null,[(0,i._)("ol",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortParentsPresentExpenses,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,M),[[s.nr,e.category]]),j,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,B),[[s.nr,e.amount]])])))),128))])])],2),(0,i._)("div",{class:(0,o.C_)(a.unitDiv)},[(0,i._)("div",null,[G,(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortFutureExpenses,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[H,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,T),[[s.nr,e.amount]])])))),128)),(0,i._)("li",null,[(0,i.Uk)("계산값 : "),(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t[3]||(t[3]=e=>r.sumFutureExpenses=e),readonly:""},null,2),[[s.nr,r.sumFutureExpenses]])])])]),(0,i._)("div",null,[(0,i._)("ol",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortParentsFutureExpenses,(e=>((0,i.wg)(),(0,i.iD)("li",{key:e.id},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,J),[[s.nr,e.category]]),K,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,Y),[[s.nr,e.amount]])])))),128))])])],2)],2)],2)],2)}n(3767),n(8585),n(8696);var Z=n(3786),q=n(2761),X={data(){return{expenses:[],bodyDiv:"bodyDiv",unitDiv:"unitDiv",subGrid:"subGrid",graphGrid:"graphGrid",graphDiv:"graphDiv",sectionGrid:"sectionGrid",flowViewDiv:"flowViewDiv",listViewDiv:"listViewDiv",listViewItemDiv:"listViewItemDiv",categoryStyle:"categoryStyle_readingMode",amountStyle:"amountStyle_readingMode",newUlStyle:"newUlStyle",saveEditedStyle:"saveEditedStyle",isNewUser:"",session:"",loginMode:!0,email:""}},mounted(){this.fetchData(),this.sessionListener()},computed:{sortTotalExpenses(){return this.expenses.filter((e=>"total"===e.category))},sortPastExpenses(){return this.expenses.filter((e=>"past"===e.category))},sortPresentExpenses(){return this.expenses.filter((e=>"present"===e.category))},sortFutureExpenses(){return this.expenses.filter((e=>"future"===e.category))},sortParentsPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory))},sortParentsPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory))},sortParentsFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory))},sumTotalExpenses(){return this.expenses.filter((e=>"total"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()},sumPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()},sumPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()},sumFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()}},methods:{async loginGoogle(){const{data:e,error:t}=await Z.O.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://thinksalon.github.io/moneyflow/"}});console.log("data = ",e),console.log("error = ",t)},async signout(){const{error:e}=await Z.O.auth.signOut();console.log("error = ",e),null==e?(alert("로그아웃 되었습니다."),window.location.reload(!0)):alert("checking..")},async fetchData(){const e=await Z.O.from("expense").select().order("order",{ascending:!0}),{data:t}=e,n=this.session;let s="";function i(e){if(e.user_id===s)return!0}s=null!==n?n.user.id:null;const o=e.data.filter(i),l=o.length;this.isNewUser=!(l>0),this.isNewUser&&null!==n&&this.insertInitailData(),t.forEach((e=>{null!==e.amount&&(e.amount=e.amount.toLocaleString())})),this.expenses=t},insertInitailData(){const e=[{id:this.getUuidv4(),parents_id:null,category:"총계",amount:0,order:null,level:1}];e.forEach((e=>this.insertData(e)))},async insertData(e){try{const{error:t}=await Z.O.from("expense").insert(e);if(t)throw t}catch(t){console.error(t)}},async getSession(){const{data:e,error:t}=await Z.O.auth.getSession();return console.log("getSession = ",e),console.log("error = ",t),e},sessionListener(){Z.O.auth.onAuthStateChange(((e,t)=>{this.session=t,this.email=t?.user.email,this.loginBtnHandler()}))},loginBtnHandler(){const e=this.session;this.loginMode=null===e},getUuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}},components:{PieChart:q.Z}},R=n(89);const Q=(0,R.Z)(X,[["render",z],["__scopeId","data-v-7c0fd07c"]]);var W=Q;const $=e=>((0,i.dD)("data-v-a6f1c41c"),e=e(),(0,i.Cn)(),e),ee=$((()=>(0,i._)("h2",null,"리스트 뷰",-1))),te=["onUpdate:modelValue"],ne=$((()=>(0,i._)("span",null," : ",-1))),se=["onUpdate:modelValue"],ie=$((()=>(0,i._)("span",null," *하위 합계 : ",-1))),oe=["onUpdate:modelValue"],le=["onUpdate:modelValue"],ae=$((()=>(0,i._)("span",null," : ",-1))),re=["onUpdate:modelValue"],ue=["onClick"],de=$((()=>(0,i._)("span",null," *하위 합계 : ",-1))),ce=["onUpdate:modelValue"],pe=["onClick"],me={key:0},ye=["onUpdate:modelValue"],he=$((()=>(0,i._)("span",null," : ",-1))),ge=["onUpdate:modelValue"],_e=["onClick"],fe=$((()=>(0,i._)("span",null," *하위 합계 : ",-1))),ve=["onUpdate:modelValue"],we=["onClick"],xe={key:0},Ce=["onSubmit"],De=["onUpdate:modelValue"],Ee=$((()=>(0,i._)("span",null," : ",-1))),be=["onUpdate:modelValue"],Se=$((()=>(0,i._)("button",null,"입력",-1))),Ve=["onSubmit"],Ue=["onUpdate:modelValue"],ke=$((()=>(0,i._)("span",null," : ",-1))),Oe=["onUpdate:modelValue"],Ne=$((()=>(0,i._)("button",null,"입력",-1))),Ie=$((()=>(0,i._)("h2",null,"플로우 뷰",-1))),Pe=[Ie],Le=["disabled"],Fe=["disabled"];function Ae(e,t,n,l,a,r){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{class:(0,o.C_)(a.sectionGrid)},[(0,i._)("div",{class:(0,o.C_)(a.listViewDiv)},[ee,(0,i._)("div",{class:(0,o.C_)(a.listViewItemDiv)},[(0,i._)("ol",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortLevel1,(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,o.C_)(a.listViewLiStyle),key:e.order},[(0,i._)("div",{class:(0,o.C_)(a.listViewLiDiv)},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,te),[[s.nr,e.category]]),ne,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,se),[[s.nr,e.amount]])],2),ie,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>r.sumExpenses(e.id)[0]=t,readonly:""},null,10,oe),[[s.nr,r.sumExpenses(e.id)[0]]]),(0,i._)("ol",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortIdAndLevel(e.id,e.level),(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,o.C_)(a.listViewLiStyle),key:e.order},[(0,i._)("div",{class:(0,o.C_)(a.listViewLiDiv)},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,le),[[s.nr,e.category]]),ae,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,re),[[s.nr,e.amount]])],2),(0,i._)("button",{onClick:t=>r.removeExpense(e)},"X",8,ue),de,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>r.sumExpenses(e.id)[0]=t,readonly:""},null,10,ce),[[s.nr,r.sumExpenses(e.id)[0]]]),(0,i._)("button",{onClick:t=>r.toggleSubList(e)},(0,o.zw)(e.show_sub_list?"하위항목 숨기기":"하위항목 보기"),9,pe),e.show_sub_list?((0,i.wg)(),(0,i.iD)("div",me,[(0,i._)("ol",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(r.sortIdAndLevel(e.id,e.level),(e=>((0,i.wg)(),(0,i.iD)("li",{class:(0,o.C_)(a.listViewLiStyle),key:e.order},[(0,i._)("div",{class:(0,o.C_)(a.listViewLiDiv)},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,ye),[[s.nr,e.category]]),he,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,ge),[[s.nr,e.amount]])],2),(0,i._)("button",{onClick:t=>r.removeExpense(e)},"X",8,_e),fe,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>r.sumExpenses(e.id)[0]=t,readonly:""},null,10,ve),[[s.nr,r.sumExpenses(e.id)[0]]]),(0,i._)("button",{onClick:t=>r.toggleSubList(e)},(0,o.zw)(e.show_sub_list?"하위항목 숨기기":"하위항목 보기"),9,we),e.show_sub_list?((0,i.wg)(),(0,i.iD)("div",xe)):(0,i.kq)("",!0)],2)))),128)),(0,i._)("form",{onSubmit:(0,s.iM)((t=>r.createNewExpense(e.id,e.level)),["prevent"])},[(0,i._)("div",{class:(0,o.C_)(a.listViewLiDiv)},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>this.inputBoxesForCategory[e.id]=t,placeholder:"새 리스트 적기"},null,10,De),[[s.nr,this.inputBoxesForCategory[e.id]]]),Ee,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>this.inputBoxesForAmount[e.id]=t,placeholder:"0"},null,10,be),[[s.nr,this.inputBoxesForAmount[e.id]]])],2),Se],40,Ce)])])):(0,i.kq)("",!0)],2)))),128)),(0,i._)("form",{onSubmit:(0,s.iM)((t=>r.createNewExpense(e.id,e.level)),["prevent"])},[(0,i._)("div",{class:(0,o.C_)(a.listViewLiDiv)},[(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.categoryStyle),"onUpdate:modelValue":t=>this.inputBoxesForCategory[e.id]=t,placeholder:"새 리스트 적기"},null,10,Ue),[[s.nr,this.inputBoxesForCategory[e.id]]]),ke,(0,i.wy)((0,i._)("input",{class:(0,o.C_)(a.amountStyle),"onUpdate:modelValue":t=>this.inputBoxesForAmount[e.id]=t,placeholder:"0"},null,10,Oe),[[s.nr,this.inputBoxesForAmount[e.id]]])],2),Ne],40,Ve)])],2)))),128))])],2)],2),(0,i._)("div",{class:(0,o.C_)(a.flowViewDiv)},Pe,2)],2),(0,i._)("div",{class:(0,o.C_)(a.saveEditedDiv)},[(0,i._)("button",{class:(0,o.C_)({saveEditedStyle_active:!0===r.isEdited,saveEditedStyle_inactive:!1===r.isEdited}),disabled:!r.isEdited,onClick:t[0]||(t[0]=(...e)=>r.editExpenses&&r.editExpenses(...e))},"편집한 내용 저장",10,Le),(0,i._)("button",{class:(0,o.C_)({cancelEditedStyle_active:!0===r.isEdited,cancelEditedStyle_inactive:!1===r.isEdited}),disabled:!r.isEdited,onClick:t[1]||(t[1]=(...e)=>r.cancelEditing&&r.cancelEditing(...e))},"편집 취소",10,Fe)],2)],64)}n(7658);var Me={data(){return{expenses:[],fetchedExpenses:[],inputBoxesForCategory:{},inputBoxesForAmount:{},unitDiv:"unitDiv",subGrid:"subGrid",graphGrid:"graphGrid",graphDiv:"graphDiv",sectionGrid:"sectionGrid",flowViewDiv:"flowViewDiv",listViewDiv:"listViewDiv",listViewItemDiv:"listViewItemDiv",listViewLiDiv:"listViewLiDiv",categoryStyle:"categoryStyle",amountStyle:"amountStyle",newUlStyle:"newUlStyle",saveEditedStyle_active:"saveEditedStyle_active",saveEditedStyle_inactive:"saveEditedStyle_inactive",cancelEditedStyle_active:"cancelEditedStyle_active",cancelEditedStyle_inactive:"cancelEditedStyle_inactive",saveEditedDiv:"saveEditedDiv",listViewLiStyle:"listViewLiStyle",listViewOlStyle:"listViewOlStyle",isEditValue:!0}},mounted(){this.fetchData(),this.monitorIsEdited()},computed:{updateInputboxes(){return this.expenses.forEach((e=>{this.inputBoxesForCategory[e.id]="",this.inputBoxesForAmount[e.id]=""})),0},sortLevel1(){return this.expenses.filter((e=>1===e.level))},sortLevel2(){return this.expenses.filter((e=>2===e.level))},isEdited(){const e=[];this.fetchedExpenses.forEach((t=>{e.push({category:t.category,amount:Number(t.amount)})}));const t=[];this.expenses.forEach((e=>{t.push({category:e.category,amount:Number(e.amount)})}));const n=JSON.stringify(e),s=JSON.stringify(t),i=(n||"")!=(s||"");return i}},methods:{test(){console.log("test!");const e=[];this.expenses.forEach((t=>{const n=this.expenses.filter((e=>e.parentsCategory===t.category));n.length>0&&e.push({childrenId:n.map((e=>e.id)),parentsId:t.id})})),e.forEach((e=>{e.childrenId.forEach((t=>{const n=e.parentsId;this.expenses.forEach((e=>{e.id===t&&(e.parents_id=n,this.upsertData(e))}))}))}))},sortIdAndLevel(e,t){return this.expenses.filter((n=>n.parents_id===e&&n.level===t+1))},toggleSubList(e){e.show_sub_list=!e.show_sub_list,this.upsertData(e)},sumExpenses(e){const t=this.expenses.filter((t=>t.parents_id===e)).reduce(((e,t)=>e+Number(t.amount)),0);return[t]},sortExpenses(e){return this.expenses.filter((t=>t.category===e))},monitorIsEdited(){this.isEdited?this.isEditValue=!0:this.isEditValue=!1},createNewExpense(e,t){const n=t+1,s={id:this.getUuidv4(),parents_id:e,category:this.inputBoxesForCategory[e],amount:this.inputBoxesForAmount[e],order:this.setOrder(e),level:n};this.expenses.push(s),this.inputBoxesForCategory[e]="",this.inputBoxesForAmount[e]=""},async fetchData(){const e=await Z.O.from("expense").select().order("order",{ascending:!0}),{data:t}=e;this.expenses=t,this.fetchedExpenses=JSON.parse(JSON.stringify(t))},removeExpense(e){const t=confirm("내용을 삭제하시겠습니까? 삭제 후, '저장'버튼을 눌러야 삭제가 완료됩니다.");if(t){const t=e.parents_id,n=e.order;this.expenses.forEach((e=>{const s=e.order;e.parents_id==t&&s>n&&(this.expenses[this.expenses.indexOf(e)].order=s-1)})),this.expenses=this.expenses.filter((t=>t!==e)),2==e.level&&(this.expenses=this.expenses.filter((t=>t.parents_id!==e.id)))}},editExpenses(){const e=confirm("수정된 내용을 저장하시겠습니까?");if(e){const e=this.expenses.map((e=>e.id)),t=this.fetchedExpenses.map((e=>e.id)),n=t.filter((t=>!e.includes(t)));n.forEach((e=>this.deleteData(e))),this.expenses.forEach((e=>this.upsertData(e))),this.fetchedExpenses=JSON.parse(JSON.stringify(this.expenses)),alert("저장되었습니다.")}},async upsertData(e){try{const{error:t}=await Z.O.from("expense").upsert(e).eq("id",e.id);if(t)throw t}catch(t){console.error(t)}},async deleteData(e){try{const{error:t}=await Z.O.from("expense").delete().eq("id",e);if(t)throw t}catch(t){console.error(t)}},getUuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))},setOrder(e){const t=this.expenses.filter((t=>t.parents_id===e)),n=Object.keys(t).length;return n+1},cancelEditing(){const e=confirm("편집을 취소하시겠습니까? 취소하면, 편집 중인 내용은 저장되지 않습니다.");e&&(this.expenses="",this.expenses=JSON.parse(JSON.stringify(this.fetchedExpenses)))}},components:{}};const je=(0,R.Z)(Me,[["render",Ae],["__scopeId","data-v-a6f1c41c"]]);var Be=je,Ge={data(){return{mode:!0,menuDiv:"menuDiv",pageHanderDiv:"pageHanderDiv",loginMenuDiv:"loginMenuDiv",titleDiv:"titleDiv",mainViewDiv:"mainViewDiv",subMenuGrid:"subMenuGrid",mainBodyDiv:"mainBodyDiv"}},mixins:[W],components:{ReadingView:W,ListEditingView:Be},methods:{handlingMode(){this.mode||confirm("편집을 종료하시겠습니까? 수정 후 저장하지 않은 내용은 저장되지 않습니다."),this.mode=!this.mode}}};const He=(0,R.Z)(Ge,[["render",g],["__scopeId","data-v-83a2f504"]]);var Te=He,Je=n(2483);const Ke=[{path:"/reading",name:"읽기모드",component:W},{path:"/editing",name:"편집모드",component:()=>n.e(544).then(n.bind(n,6544))}],Ye=(0,Je.p7)({history:(0,Je.PO)("/moneyflow/"),routes:Ke});var ze=Ye;(0,s.ri)(Te).use(ze).mount("#app")},2761:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(3396);function i(e,t,n,i,o,l){const a=(0,s.up)("Pie",!0);return(0,s.wg)(),(0,s.j4)(a,{"chart-options":o.chartOptions,"chart-data":l.getChartData,"chart-id":n.chartId,"dataset-id-key":n.datasetIdKey,plugins:n.plugins,"css-classes":n.cssClasses,styles:n.styles,width:n.width,height:n.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height"])}var o=n(6294),l=n(741);l.kL.register(l.Dx,l.u,l.De,l.qi,l.uw);var a={name:"PieChart",components:{Pie:o.by},props:{expenses:{type:Array,default:()=>[]},chartId:{type:String,default:"pie-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:250},height:{type:Number,default:250},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},computed:{getPastAmount(){const e=this.expenses.find((e=>"past"===e.category))?.amount||"";let t=e;return isNaN(e)&&(t=Number(e.replace(/,/g,""))),t},getPresentAmount(){const e=this.expenses.find((e=>"present"===e.category))?.amount||"";let t=e;return isNaN(e)&&(t=Number(e.replace(/,/g,""))),t},getFutureAmount(){const e=this.expenses.find((e=>"future"===e.category))?.amount||"";let t=e;return isNaN(e)&&(t=Number(e.replace(/,/g,""))),t},getChartData(){const e={labels:["과거형 지출","현재형 지출","미래형 지출"],datasets:[{backgroundColor:["#c68036","#6fa468","#5eaab4"],data:[this.getPastAmount,this.getPresentAmount,this.getFutureAmount]}]};return e}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1}}}},r=n(89);const u=(0,r.Z)(a,[["render",i]]);var d=u}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,s,i,o){if(!s){var l=1/0;for(d=0;d<e.length;d++){s=e[d][0],i=e[d][1],o=e[d][2];for(var a=!0,r=0;r<s.length;r++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](s[r])}))?s.splice(r--,1):(a=!1,o<l&&(l=o));if(a){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,i,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(s,i){if(1&i&&(s=this(s)),8&i)return s;if("object"===typeof s&&s){if(4&i&&s.__esModule)return s;if(16&i&&"function"===typeof s.then)return s}var o=Object.create(null);n.r(o);var l={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&s;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){l[e]=function(){return s[e]}}));return l["default"]=function(){return s},n.d(o,l),o}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,s){return n.f[s](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+".b7bbb232.js"}}(),function(){n.miniCssF=function(e){return"css/"+e+".d83ad269.css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="thinksalon2304:";n.l=function(s,i,o,l){if(e[s])e[s].push(i);else{var a,r;if(void 0!==o)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==t+o){a=c;break}}a||(r=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=s),e[s]=[i];var p=function(t,n){a.onerror=a.onload=null,clearTimeout(m);var i=e[s];if(delete e[s],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=p.bind(null,a.onerror),a.onload=p.bind(null,a.onload),r&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/moneyflow/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,n,s,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var l=function(n){if(o.onerror=o.onload=null,"load"===n.type)s();else{var l=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=l,r.request=a,o.parentNode&&o.parentNode.removeChild(o),i(r)}};return o.onerror=o.onload=l,o.href=t,n?n.parentNode.insertBefore(o,n.nextSibling):document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var i=n[s],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){i=l[s],o=i.getAttribute("data-href");if(o===e||o===t)return i}},s=function(s){return new Promise((function(i,o){var l=n.miniCssF(s),a=n.p+l;if(t(l,a))return i();e(s,a,null,i,o)}))},i={143:0};n.f.miniCss=function(e,t){var n={544:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=s(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}}(),function(){var e={143:0};n.f.j=function(t,s){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)s.push(i[2]);else{var o=new Promise((function(n,s){i=e[t]=[n,s]}));s.push(i[2]=o);var l=n.p+n.u(t),a=new Error,r=function(s){if(n.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+l+")",a.name="ChunkLoadError",a.type=o,a.request=l,i[1](a)}};n.l(l,r,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,o,l=s[0],a=s[1],r=s[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(r)var d=r(n)}for(t&&t(s);u<l.length;u++)o=l[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},s=self["webpackChunkthinksalon2304"]=self["webpackChunkthinksalon2304"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(4908)}));s=n.O(s)})();
//# sourceMappingURL=app.4bd12182.js.map