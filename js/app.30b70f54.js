(function(){"use strict";var e={3786:function(e,t,n){n.d(t,{O:function(){return o}});var s=n(7797);const l="https://dszmaeqcdakyucdonsez.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRzem1hZXFjZGFreXVjZG9uc2V6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzIzODUxMzgsImV4cCI6MTk4Nzk2MTEzOH0.-p7uNn_hdw0i6j5FANFYFKCGnU9Pn-QMwML10CLOXTM",o=(0,s.eI)(l,a)},8536:function(e,t,n){var s=n(9242),l=n(3396),a=n(7139);const o=e=>((0,l.dD)("data-v-27e4deec"),e=e(),(0,l.Cn)(),e),r=o((()=>(0,l._)("h1",null,"현금흐름 관리하기",-1))),i=[r],u={key:0},d={key:0},p={key:1},c=o((()=>(0,l._)("span",null," 버튼을 누르면, 편집모드가 종료됩니다.",-1))),y={key:0},m=o((()=>(0,l._)("span",null," *버튼을 눌러 로그인할 수 있습니다.",-1))),_={key:1};function g(e,t,n,s,o,r){const g=(0,l.up)("EditingView"),h=(0,l.up)("ReadingView");return(0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(o.mainBodyDiv)},[(0,l._)("div",{class:(0,a.C_)(o.menuDiv)},[(0,l._)("div",{class:(0,a.C_)(o.titleDiv)},i,2),(0,l._)("div",{class:(0,a.C_)(o.subMenuGrid)},[(0,l._)("div",{class:(0,a.C_)(o.pageHanderDiv)},[o.mode?((0,l.wg)(),(0,l.iD)("div",u,[(0,l._)("button",{onClick:t[0]||(t[0]=(...e)=>r.handlingMode&&r.handlingMode(...e))},"편집모드로 전환"),o.mode?((0,l.wg)(),(0,l.iD)("span",d," 버튼을 누르면, 내용을 편집할 수 있습니다.")):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("div",p,[(0,l._)("button",{onClick:t[1]||(t[1]=(...e)=>r.handlingMode&&r.handlingMode(...e))},"읽기모드로 전환"),c]))],2),(0,l._)("div",{class:(0,a.C_)(o.loginMenuDiv)},[e.loginMode?((0,l.wg)(),(0,l.iD)("div",y,[(0,l._)("button",{onClick:t[2]||(t[2]=(...t)=>e.loginGoogle&&e.loginGoogle(...t))},"구글 로그인"),m])):((0,l.wg)(),(0,l.iD)("div",_,[(0,l._)("span",null," 로그인 계정: "+(0,a.zw)(e.email)+" | ",1),(0,l._)("button",{onClick:t[3]||(t[3]=(...t)=>e.signout&&e.signout(...t))},"로그아웃")]))],2)],2)],2),(0,l._)("div",{class:(0,a.C_)(o.mainViewDiv)},[o.mode?((0,l.wg)(),(0,l.j4)(g,{key:0})):((0,l.wg)(),(0,l.j4)(h,{key:1}))],2)],2)}const h=e=>((0,l.dD)("data-v-60cd663b"),e=e(),(0,l.Cn)(),e),v=h((()=>(0,l._)("h2",null,"리스트 뷰",-1))),f=["onUpdate:modelValue"],w=h((()=>(0,l._)("span",null," : ",-1))),C=["onUpdate:modelValue"],x=["onUpdate:modelValue"],D=h((()=>(0,l._)("h2",null,"플로우 뷰",-1))),E=h((()=>(0,l._)("h2",null,"돈이 나가는 영역",-1))),V=h((()=>(0,l._)("span",null,"결정값 : ",-1))),S=["onUpdate:modelValue"],U=h((()=>(0,l._)("span",null,"계산값 : ",-1))),b=h((()=>(0,l._)("h3",null,"과거형 지출",-1))),k=h((()=>(0,l._)("span",null,"결정값 : ",-1))),P=["onUpdate:modelValue"],O=["onUpdate:modelValue"],N=h((()=>(0,l._)("span",null," : ",-1))),I=["onUpdate:modelValue"],M=h((()=>(0,l._)("h3",null,"현재형 지출",-1))),G=h((()=>(0,l._)("span",null,"결정값 : ",-1))),A=["onUpdate:modelValue"],F=["onUpdate:modelValue"],H=h((()=>(0,l._)("span",null," : ",-1))),j=["onUpdate:modelValue"],Y=h((()=>(0,l._)("h3",null,"미래형 지출",-1))),K=h((()=>(0,l._)("span",null,"결정값 : ",-1))),L=["onUpdate:modelValue"],T=["onUpdate:modelValue"],J=h((()=>(0,l._)("span",null," : ",-1))),z=["onUpdate:modelValue"];function Z(e,t,n,o,r,i){const u=(0,l.up)("PieChart");return(0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(r.sectionGrid)},[(0,l._)("div",{class:(0,a.C_)(r.listViewDiv)},[v,(0,l._)("div",{class:(0,a.C_)(r.listViewItemDiv)},[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.sortLevel3,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,f),[[s.nr,e.category]]),w,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,C),[[s.nr,e.amount]]),(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.categoryStyle),"onUpdate:modelValue":t=>e.parentsCategory=t,readonly:""},null,10,x),[[s.nr,e.parentsCategory]])])))),128))])],2)],2),(0,l._)("div",{class:(0,a.C_)(r.flowViewDiv)},[D,(0,l._)("div",{class:(0,a.C_)(r.unitDiv)},[(0,l._)("div",{class:(0,a.C_)(r.graphGrid)},[(0,l._)("div",null,[E,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sortTotalExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[V,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,S),[[s.nr,e.amount]])])))),128)),(0,l._)("li",null,[U,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t[0]||(t[0]=e=>i.sumTotalExpenses=e),readonly:""},null,2),[[s.nr,i.sumTotalExpenses]])])])]),(0,l._)("div",{class:(0,a.C_)(r.graphDiv)},[(0,l.Wm)(u,{expenses:r.expenses},null,8,["expenses"])],2)],2)],2),(0,l._)("div",{class:(0,a.C_)(r.subGrid)},[(0,l._)("div",{class:(0,a.C_)(r.unitDiv)},[(0,l._)("div",null,[b,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sortPastExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[k,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,P),[[s.nr,e.amount]])])))),128)),(0,l._)("li",null,[(0,l.Uk)("계산값 : "),(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t[1]||(t[1]=e=>i.sumPastExpenses=e),readonly:""},null,2),[[s.nr,i.sumPastExpenses]])])])]),(0,l._)("div",null,[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sortParentsPastExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,O),[[s.nr,e.category]]),N,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,I),[[s.nr,e.amount]])])))),128))])])],2),(0,l._)("div",{class:(0,a.C_)(r.unitDiv)},[(0,l._)("div",null,[M,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sortPresentExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[G,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,A),[[s.nr,e.amount]])])))),128)),(0,l._)("li",null,[(0,l.Uk)("계산값 : "),(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t[2]||(t[2]=e=>i.sumPresentExpenses=e),readonly:""},null,2),[[s.nr,i.sumPresentExpenses]])])])]),(0,l._)("div",null,[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sortParentsPresentExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,F),[[s.nr,e.category]]),H,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,j),[[s.nr,e.amount]])])))),128))])])],2),(0,l._)("div",{class:(0,a.C_)(r.unitDiv)},[(0,l._)("div",null,[Y,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sortFutureExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[K,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0",readonly:""},null,10,L),[[s.nr,e.amount]])])))),128)),(0,l._)("li",null,[(0,l.Uk)("계산값 : "),(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t[3]||(t[3]=e=>i.sumFutureExpenses=e),readonly:""},null,2),[[s.nr,i.sumFutureExpenses]])])])]),(0,l._)("div",null,[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.sortParentsFutureExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.categoryStyle),"onUpdate:modelValue":t=>e.category=t,readonly:""},null,10,T),[[s.nr,e.category]]),J,(0,l.wy)((0,l._)("input",{class:(0,a.C_)(r.amountStyle),"onUpdate:modelValue":t=>e.amount=t,readonly:""},null,10,z),[[s.nr,e.amount]])])))),128))])])],2)],2)],2)],2)}n(3767),n(8585),n(8696);var X=n(3786),R=n(2761),B={data(){return{expenses:[],bodyDiv:"bodyDiv",unitDiv:"unitDiv",subGrid:"subGrid",graphGrid:"graphGrid",graphDiv:"graphDiv",sectionGrid:"sectionGrid",flowViewDiv:"flowViewDiv",listViewDiv:"listViewDiv",listViewItemDiv:"listViewItemDiv",categoryStyle:"categoryStyle_readingMode",amountStyle:"amountStyle_readingMode",newUlStyle:"newUlStyle",saveEditedStyle:"saveEditedStyle",isNewUser:"",session:"",loginMode:!0,email:""}},mounted(){this.fetchData(),this.sessionListener()},computed:{sortTotalExpenses(){return this.expenses.filter((e=>"total"===e.category))},sortPastExpenses(){return this.expenses.filter((e=>"past"===e.category))},sortPresentExpenses(){return this.expenses.filter((e=>"present"===e.category))},sortFutureExpenses(){return this.expenses.filter((e=>"future"===e.category))},sortParentsPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory))},sortParentsPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory))},sortParentsFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory))},sumTotalExpenses(){return this.expenses.filter((e=>"total"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()},sumPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()},sumPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()},sumFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount.replace(/,/g,""))),0).toLocaleString()}},methods:{async loginGoogle(){const{data:e,error:t}=await X.O.auth.signInWithOAuth({provider:"google"});console.log("data = ",e),console.log("error = ",t)},async signout(){const{error:e}=await X.O.auth.signOut();console.log("error = ",e),null==e?(alert("로그아웃 되었습니다."),window.location.reload(!0)):alert("checking..")},async fetchData(){const e=await X.O.from("expense").select().order("order",{ascending:!0}),{data:t}=e,n=this.session;let s="";function l(e){if(e.user_id===s)return!0}s=null!==n?n.user.id:null;const a=e.data.filter(l),o=a.length;this.isNewUser=!(o>0),this.isNewUser&&null!==n&&this.insertInitailData(),t.forEach((e=>e.amount=e.amount.toLocaleString())),this.expenses=t},insertInitailData(){const e=[{id:this.getUuidv4(),parentsCategory:null,category:"total",amount:0,order:null,level:1},{id:this.getUuidv4(),parentsCategory:"total",category:"past",amount:0,order:null,level:2},{id:this.getUuidv4(),parentsCategory:"total",category:"present",amount:0,order:null,level:2},{id:this.getUuidv4(),parentsCategory:"total",category:"future",amount:0,order:null,level:2}];e.forEach((e=>this.insertData(e)))},async insertData(e){try{const{error:t}=await X.O.from("expense").insert(e);if(t)throw t}catch(t){console.error(t)}},async getSession(){const{data:e,error:t}=await X.O.auth.getSession();return console.log("getSession = ",e),console.log("error = ",t),e},sessionListener(){X.O.auth.onAuthStateChange(((e,t)=>{this.session=t,this.email=t?.user.email,this.loginBtnHandler()}))},loginBtnHandler(){const e=this.session;this.loginMode=null===e},getUuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}},components:{PieChart:R.Z}},q=n(89);const W=(0,q.Z)(B,[["render",Z],["__scopeId","data-v-60cd663b"]]);var Q=W,$=n(4816),ee={data(){return{mode:!0,menuDiv:"menuDiv",pageHanderDiv:"pageHanderDiv",loginMenuDiv:"loginMenuDiv",titleDiv:"titleDiv",mainViewDiv:"mainViewDiv",subMenuGrid:"subMenuGrid",mainBodyDiv:"mainBodyDiv"}},mixins:[Q],components:{ReadingView:Q,EditingView:$["default"]},methods:{handlingMode(){this.mode||confirm("편집을 종료하시겠습니까? 수정 후 저장하지 않은 내용은 저장되지 않습니다."),this.mode=!this.mode}}};const te=(0,q.Z)(ee,[["render",g],["__scopeId","data-v-27e4deec"]]);var ne=te,se=n(2483);const le=[{path:"/reading",name:"읽기모드",component:Q},{path:"/editing",name:"편집모드",component:()=>Promise.resolve().then(n.bind(n,4816))}],ae=(0,se.p7)({history:(0,se.PO)("/"),routes:le});var oe=ae;(0,s.ri)(ne).use(oe).mount("#app")},4816:function(e,t,n){n.r(t),n.d(t,{default:function(){return ee}});var s=n(3396),l=n(7139),a=n(9242);const o=e=>((0,s.dD)("data-v-1818bf79"),e=e(),(0,s.Cn)(),e),r=o((()=>(0,s._)("h2",null,"리스트 뷰",-1))),i=o((()=>(0,s._)("span",null,"결정값 : ",-1))),u=["onUpdate:modelValue"],d=o((()=>(0,s._)("span",null,"계산값 : ",-1))),p=["onClick"],c=["onUpdate:modelValue"],y=o((()=>(0,s._)("span",null," : ",-1))),m=["onUpdate:modelValue"],_=o((()=>(0,s._)("h2",null,"돈이 나가는 영역",-1))),g=o((()=>(0,s._)("span",null,"결정값 : ",-1))),h=["onUpdate:modelValue"],v=o((()=>(0,s._)("span",null,"계산값 : ",-1))),f=o((()=>(0,s._)("h3",null,"과거형 지출",-1))),w=o((()=>(0,s._)("span",null,"결정값 : ",-1))),C=["onUpdate:modelValue"],x=["onUpdate:modelValue"],D=o((()=>(0,s._)("span",null," : ",-1))),E=["onUpdate:modelValue"],V=["onClick"],S=o((()=>(0,s._)("span",null," : ",-1))),U=o((()=>(0,s._)("button",null,"입력",-1))),b=o((()=>(0,s._)("h3",null,"현재형 지출",-1))),k=o((()=>(0,s._)("span",null,"결정값 : ",-1))),P=["onUpdate:modelValue"],O=["onUpdate:modelValue"],N=o((()=>(0,s._)("span",null," : ",-1))),I=["onUpdate:modelValue"],M=["onClick"],G=o((()=>(0,s._)("span",null," : ",-1))),A=o((()=>(0,s._)("button",null,"입력",-1))),F=o((()=>(0,s._)("h3",null,"미래형 지출",-1))),H=o((()=>(0,s._)("span",null,"결정값 : ",-1))),j=["onUpdate:modelValue"],Y=["onUpdate:modelValue"],K=o((()=>(0,s._)("span",null," : ",-1))),L=["onUpdate:modelValue"],T=["onClick"],J=o((()=>(0,s._)("span",null," : ",-1))),z=o((()=>(0,s._)("button",null,"입력",-1))),Z=["disabled"],X=["disabled"];function R(e,t,n,o,R,B){const q=(0,s.up)("PieChart");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:(0,l.C_)(R.sectionGrid)},[(0,s._)("div",{class:(0,l.C_)(R.listViewDiv)},[r,(0,s._)("div",{class:(0,l.C_)(R.listViewItemDiv)},[(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortLevel2,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s._)("span",null,(0,l.zw)(e.category),1),i,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>B.sortExpenses(e.category)[0].amount=t},null,10,u),[[a.nr,B.sortExpenses(e.category)[0].amount]]),d,(0,s._)("ol",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.filteredExpenses(e.category),(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id,onClick:t=>B.getLiId(e.id)},[(0,s._)("div",{class:(0,l.C_)(R.listViewLiDiv)},[(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,c),[[a.nr,e.category]]),y,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,m),[[a.nr,e.amount]])],2)],8,p)))),128))])])))),128))])],2)],2),(0,s._)("div",{class:(0,l.C_)(R.flowViewDiv)},[(0,s._)("div",{class:(0,l.C_)(R.unitDiv)},[(0,s._)("div",{class:(0,l.C_)(R.graphGrid)},[(0,s._)("div",null,[_,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortTotalExpenses,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[g,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,h),[[a.nr,e.amount]])])))),128)),(0,s._)("li",null,[v,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t[0]||(t[0]=e=>B.sumTotalExpenses=e),readonly:""},null,2),[[a.nr,B.sumTotalExpenses]])])])]),(0,s._)("div",{class:(0,l.C_)(R.graphDiv)},[(0,s.Wm)(q,{expenses:R.expenses},null,8,["expenses"])],2)],2)],2),(0,s._)("div",{class:(0,l.C_)(R.subGrid)},[(0,s._)("div",{class:(0,l.C_)(R.unitDiv)},[(0,s._)("div",null,[f,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortPastExpenses,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[w,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,C),[[a.nr,e.amount]])])))),128)),(0,s._)("li",null,[(0,s.Uk)("계산값 : "),(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t[1]||(t[1]=e=>B.sumPastExpenses=e),readonly:""},null,2),[[a.nr,B.sumPastExpenses]])])])]),(0,s._)("div",null,[(0,s._)("ol",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortParentsPastExpenses,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,x),[[a.nr,e.category]]),D,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,E),[[a.nr,e.amount]]),(0,s._)("button",{onClick:t=>B.removeExpense(e)},"X",8,V)])))),128))]),(0,s._)("ul",{class:(0,l.C_)(R.newUlStyle)},[(0,s._)("li",null,[(0,s._)("form",{onSubmit:t[4]||(t[4]=(0,a.iM)((e=>B.addExpense("past")),["prevent"]))},[(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.categoryStyle),"onUpdate:modelValue":t[2]||(t[2]=e=>R.newCategory_past=e),placeholder:"새 리스트 적기"},null,2),[[a.nr,R.newCategory_past]]),S,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t[3]||(t[3]=e=>R.newAmount_past=e),placeholder:"0"},null,2),[[a.nr,R.newAmount_past]]),U],32)])],2)])],2),(0,s._)("div",{class:(0,l.C_)(R.unitDiv)},[(0,s._)("div",null,[b,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortPresentExpenses,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[k,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,P),[[a.nr,e.amount]])])))),128)),(0,s._)("li",null,[(0,s.Uk)("계산값 : "),(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t[5]||(t[5]=e=>B.sumPresentExpenses=e),readonly:""},null,2),[[a.nr,B.sumPresentExpenses]])])])]),(0,s._)("div",null,[(0,s._)("ol",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortParentsPresentExpenses,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,O),[[a.nr,e.category]]),N,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,I),[[a.nr,e.amount]]),(0,s._)("button",{onClick:t=>B.removeExpense(e)},"X",8,M)])))),128))]),(0,s._)("ul",{class:(0,l.C_)(R.newUlStyle)},[(0,s._)("li",null,[(0,s._)("form",{onSubmit:t[8]||(t[8]=(0,a.iM)((e=>B.addExpense("present")),["prevent"]))},[(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.categoryStyle),"onUpdate:modelValue":t[6]||(t[6]=e=>R.newCategory_present=e),placeholder:"새 리스트 적기"},null,2),[[a.nr,R.newCategory_present]]),G,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t[7]||(t[7]=e=>R.newAmount_present=e),placeholder:"0"},null,2),[[a.nr,R.newAmount_present]]),A],32)])],2)])],2),(0,s._)("div",{class:(0,l.C_)(R.unitDiv)},[(0,s._)("div",null,[F,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortFutureExpenses,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[H,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,j),[[a.nr,e.amount]])])))),128)),(0,s._)("li",null,[(0,s.Uk)("계산값 : "),(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t[9]||(t[9]=e=>B.sumFutureExpenses=e),readonly:""},null,2),[[a.nr,B.sumFutureExpenses]])])])]),(0,s._)("div",null,[(0,s._)("ol",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.sortParentsFutureExpenses,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,Y),[[a.nr,e.category]]),K,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,L),[[a.nr,e.amount]]),(0,s._)("button",{onClick:t=>B.removeExpense(e)},"X",8,T)])))),128))]),(0,s._)("ul",{class:(0,l.C_)(R.newUlStyle)},[(0,s._)("li",null,[(0,s._)("form",{onSubmit:t[12]||(t[12]=(0,a.iM)((e=>B.addExpense("future")),["prevent"]))},[(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.categoryStyle),"onUpdate:modelValue":t[10]||(t[10]=e=>R.newCategory_future=e),placeholder:"새 리스트 적기"},null,2),[[a.nr,R.newCategory_future]]),J,(0,s.wy)((0,s._)("input",{class:(0,l.C_)(R.amountStyle),"onUpdate:modelValue":t[11]||(t[11]=e=>R.newAmount_future=e),placeholder:"0"},null,2),[[a.nr,R.newAmount_future]]),z],32)])],2)])],2)],2)],2)],2),(0,s._)("div",{class:(0,l.C_)(R.saveEditedDiv)},[(0,s._)("button",{class:(0,l.C_)({saveEditedStyle_active:!0===B.isEdited,saveEditedStyle_inactive:!1===B.isEdited}),disabled:!B.isEdited,onClick:t[13]||(t[13]=(...e)=>B.editExpenses&&B.editExpenses(...e))},"저장",10,Z),(0,s._)("button",{class:(0,l.C_)({cancelEditedStyle_active:!0===B.isEdited,cancelEditedStyle_inactive:!1===B.isEdited}),disabled:!B.isEdited,onClick:t[14]||(t[14]=(...e)=>B.cancelEditing&&B.cancelEditing(...e))},"편집 취소",10,X)],2)],64)}n(7658),n(3767),n(8585),n(8696);var B=n(3786),q=n(2761),W={data(){return{expenses:[],fetchedExpenses:[],newCategory_past:"",newCategory_present:"",newCategory_future:"",newAmount_past:"",newAmount_present:"",newAmount_future:"",unitDiv:"unitDiv",subGrid:"subGrid",graphGrid:"graphGrid",graphDiv:"graphDiv",sectionGrid:"sectionGrid",flowViewDiv:"flowViewDiv",listViewDiv:"listViewDiv",listViewItemDiv:"listViewItemDiv",listViewLiDiv:"listViewLiDiv",categoryStyle:"categoryStyle",amountStyle:"amountStyle",newUlStyle:"newUlStyle",saveEditedStyle_active:"saveEditedStyle_active",saveEditedStyle_inactive:"saveEditedStyle_inactive",cancelEditedStyle_active:"cancelEditedStyle_active",cancelEditedStyle_inactive:"cancelEditedStyle_inactive",saveEditedDiv:"saveEditedDiv",isEditValue:!0}},mounted(){this.fetchData(),this.monitorIsEdited()},computed:{sumExpenses(e){return console.log("check!"),this.expenses.filter((t=>t.parentsCategory===e)).reduce(((e,t)=>e+Number(t.amount)),0)},sortLevel2(){return this.expenses.filter((e=>2===e.level))},sortLevel3(){return this.expenses.filter((e=>3===e.level))},sortTotalExpenses(){return this.expenses.filter((e=>"total"===e.category))},sortPastExpenses(){return this.expenses.filter((e=>"past"===e.category))},sortPresentExpenses(){return this.expenses.filter((e=>"present"===e.category))},sortFutureExpenses(){return this.expenses.filter((e=>"future"===e.category))},sortParentsPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory))},sortParentsPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory))},sortParentsFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory))},sumTotalExpenses(){return this.expenses.filter((e=>"total"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},sumPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},sumPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},sumFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},isEdited(){const e=[];this.fetchedExpenses.forEach((t=>{e.push({category:t.category,amount:Number(t.amount)})}));const t=[];this.expenses.forEach((e=>{t.push({category:e.category,amount:Number(e.amount)})}));const n=JSON.stringify(e),s=JSON.stringify(t),l=(n||"")!=(s||"");return l}},methods:{sortExpenses(e){return this.expenses.filter((t=>t.category===e))},getLiId(e){console.log("id = ",e)},filteredExpenses(e){return this.expenses.filter((t=>t.parentsCategory===e))},monitorIsEdited(){this.isEdited?this.isEditValue=!0:this.isEditValue=!1},addExpense(e){const t={id:this.getUuidv4(),parentsCategory:e,category:this["newCategory_"+e],amount:this["newAmount_"+e],order:this.setOrder(e),level:3};this.expenses.push(t),this["newCategory_"+e]="",this["newAmount_"+e]=""},async insertData(e){try{const{error:t}=await B.O.from("expense").insert(e);if(t)throw t}catch(t){console.error(t)}},async fetchData(){const e=await B.O.from("expense").select().order("order",{ascending:!0}),{data:t}=e;this.expenses=t,this.fetchedExpenses=JSON.parse(JSON.stringify(t))},removeExpense(e){const t=confirm("내용을 삭제하시겠습니까? 삭제 후, '저장'버튼을 눌러야 삭제가 완료됩니다.");if(t){const t=e.parentsCategory,n=e.order;this.expenses.forEach((e=>{const s=e.order;e.parentsCategory==t&&s>n&&(this.expenses[this.expenses.indexOf(e)].order=s-1)})),this.expenses=this.expenses.filter((t=>t!==e))}},pointEditedData(){},editExpenses(){const e=confirm("수정된 내용을 저장하시겠습니까?");if(e){const e=this.expenses.map((e=>e.id)),t=this.fetchedExpenses.map((e=>e.id)),n=t.filter((t=>!e.includes(t)));n.forEach((e=>this.deleteData(e))),this.expenses.forEach((e=>this.upsertData(e))),this.fetchedExpenses=JSON.parse(JSON.stringify(this.expenses)),alert("저장되었습니다.")}},async upsertData(e){try{const{error:t}=await B.O.from("expense").upsert(e).eq("id",e.id);if(t)throw t}catch(t){console.error(t)}},async deleteData(e){try{const{error:t}=await B.O.from("expense").delete().eq("id",e);if(t)throw t}catch(t){console.error(t)}},getUuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))},setOrder(e){const t=this.expenses.filter((t=>t.parentsCategory===e)),n=Object.keys(t).length;return n+1},cancelEditing(){const e=confirm("편집을 취소하시겠습니까? 취소하면, 편집 중인 내용은 저장되지 않습니다.");e&&(this.expenses="",this.expenses=JSON.parse(JSON.stringify(this.fetchedExpenses)))}},components:{PieChart:q.Z}},Q=n(89);const $=(0,Q.Z)(W,[["render",R],["__scopeId","data-v-1818bf79"]]);var ee=$},2761:function(e,t,n){n.d(t,{Z:function(){return d}});var s=n(3396);function l(e,t,n,l,a,o){const r=(0,s.up)("Pie",!0);return(0,s.wg)(),(0,s.j4)(r,{"chart-options":a.chartOptions,"chart-data":o.getChartData,"chart-id":n.chartId,"dataset-id-key":n.datasetIdKey,plugins:n.plugins,"css-classes":n.cssClasses,styles:n.styles,width:n.width,height:n.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height"])}var a=n(6294),o=n(741);o.kL.register(o.Dx,o.u,o.De,o.qi,o.uw);var r={name:"PieChart",components:{Pie:a.by},props:{expenses:{type:Array,default:()=>[]},chartId:{type:String,default:"pie-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:250},height:{type:Number,default:250},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},computed:{getPastAmount(){const e=this.expenses.find((e=>"past"===e.category))?.amount||"";let t=e;return isNaN(e)&&(t=Number(e.replace(/,/g,""))),t},getPresentAmount(){const e=this.expenses.find((e=>"present"===e.category))?.amount||"";let t=e;return isNaN(e)&&(t=Number(e.replace(/,/g,""))),t},getFutureAmount(){const e=this.expenses.find((e=>"future"===e.category))?.amount||"";let t=e;return isNaN(e)&&(t=Number(e.replace(/,/g,""))),t},getChartData(){const e={labels:["과거형 지출","현재형 지출","미래형 지출"],datasets:[{backgroundColor:["#c68036","#6fa468","#5eaab4"],data:[this.getPastAmount,this.getPresentAmount,this.getFutureAmount]}]};return e}},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1}}}},i=n(89);const u=(0,i.Z)(r,[["render",l]]);var d=u}},t={};function n(s){var l=t[s];if(void 0!==l)return l.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,s,l,a){if(!s){var o=1/0;for(d=0;d<e.length;d++){s=e[d][0],l=e[d][1],a=e[d][2];for(var r=!0,i=0;i<s.length;i++)(!1&a||o>=a)&&Object.keys(n.O).every((function(e){return n.O[e](s[i])}))?s.splice(i--,1):(r=!1,a<o&&(o=a));if(r){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,l,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(s,l){if(1&l&&(s=this(s)),8&l)return s;if("object"===typeof s&&s){if(4&l&&s.__esModule)return s;if(16&l&&"function"===typeof s.then)return s}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var r=2&l&&s;"object"==typeof r&&!~e.indexOf(r);r=t(r))Object.getOwnPropertyNames(r).forEach((function(e){o[e]=function(){return s[e]}}));return o["default"]=function(){return s},n.d(a,o),a}}(),function(){n.d=function(e,t){for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,a,o=s[0],r=s[1],i=s[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(l in r)n.o(r,l)&&(n.m[l]=r[l]);if(i)var d=i(n)}for(t&&t(s);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=self["webpackChunkthinksalon2304"]=self["webpackChunkthinksalon2304"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(8536)}));s=n.O(s)})();
//# sourceMappingURL=app.30b70f54.js.map