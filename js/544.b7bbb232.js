"use strict";(self["webpackChunkthinksalon2304"]=self["webpackChunkthinksalon2304"]||[]).push([[544],{6544:function(e,t,n){n.r(t),n.d(t,{default:function(){return ye}});var l=n(3396),s=n(7139),a=n(9242);const o=e=>((0,l.dD)("data-v-3f6707f8"),e=e(),(0,l.Cn)(),e),i=o((()=>(0,l._)("h2",null,"리스트 뷰",-1))),r=["onUpdate:modelValue"],u=o((()=>(0,l._)("span",null," : ",-1))),d=["onUpdate:modelValue"],p=["onClick"],c=o((()=>(0,l._)("span",null," *참고 합계 : ",-1))),y=["onUpdate:modelValue"],_=["onClick"],m=["onUpdate:modelValue"],g=o((()=>(0,l._)("span",null," : ",-1))),w=["onUpdate:modelValue"],h=["onClick"],C=o((()=>(0,l._)("span",null,"카테고리 선택하기: ",-1))),v=["value"],x=["value"],E=o((()=>(0,l._)("span",null,"내용 입력하기",-1))),f=o((()=>(0,l._)("span",null," : ",-1))),S=o((()=>(0,l._)("button",null,"입력",-1))),V=o((()=>(0,l._)("span",null,"새로운 카테고리 만들기 : ",-1))),U=o((()=>(0,l._)("button",null,"입력",-1))),D=o((()=>(0,l._)("h2",null,"플로우 뷰",-1))),b=o((()=>(0,l._)("h2",null,"돈이 나가는 영역",-1))),k=o((()=>(0,l._)("span",null,"결정값 : ",-1))),P=["onUpdate:modelValue"],O=o((()=>(0,l._)("span",null,"계산값 : ",-1))),L=o((()=>(0,l._)("h3",null,"과거형 지출",-1))),A=o((()=>(0,l._)("span",null,"결정값 : ",-1))),N=["onUpdate:modelValue"],H=["onUpdate:modelValue"],Y=o((()=>(0,l._)("span",null," : ",-1))),K=["onUpdate:modelValue"],G=["onClick"],F=o((()=>(0,l._)("span",null," : ",-1))),I=o((()=>(0,l._)("button",null,"입력",-1))),J=o((()=>(0,l._)("h3",null,"현재형 지출",-1))),M=o((()=>(0,l._)("span",null,"결정값 : ",-1))),T=["onUpdate:modelValue"],X=["onUpdate:modelValue"],q=o((()=>(0,l._)("span",null," : ",-1))),Z=["onUpdate:modelValue"],j=["onClick"],z=o((()=>(0,l._)("span",null," : ",-1))),R=o((()=>(0,l._)("button",null,"입력",-1))),W=o((()=>(0,l._)("h3",null,"미래형 지출",-1))),B=o((()=>(0,l._)("span",null,"결정값 : ",-1))),Q=["onUpdate:modelValue"],$=["onUpdate:modelValue"],ee=o((()=>(0,l._)("span",null," : ",-1))),te=["onUpdate:modelValue"],ne=["onClick"],le=o((()=>(0,l._)("span",null," : ",-1))),se=o((()=>(0,l._)("button",null,"입력",-1))),ae=["disabled"],oe=["disabled"];function ie(e,t,n,o,ie,re){const ue=(0,l.up)("PieChart");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",{class:(0,s.C_)(ie.sectionGrid)},[(0,l._)("div",{class:(0,s.C_)(ie.listViewDiv)},[i,(0,l._)("div",{class:(0,s.C_)(ie.listViewItemDiv)},[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortLevel2,(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,s.C_)(ie.listViewLiStyle),key:e.id},[(0,l._)("div",{class:(0,s.C_)(ie.listViewLiDiv)},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,r),[[a.nr,e.category]]),u,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>re.sortExpenses(e.category)[0].amount=t},null,10,d),[[a.nr,re.sortExpenses(e.category)[0].amount]])],2),(0,l._)("button",{onClick:t=>re.removeExpense(e)},"X",8,p),c,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>re.sumExpenses(e.category)[0]=t,readonly:""},null,10,y),[[a.nr,re.sumExpenses(e.category)[0]]]),(0,l._)("ol",{class:(0,s.C_)(ie.listViewOlStyle)},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.filteredExpenses(e.category),(e=>((0,l.wg)(),(0,l.iD)("li",{class:(0,s.C_)(ie.listViewLiStyle),key:e.id,onClick:t=>re.getLiId(e.id)},[(0,l._)("div",{class:(0,s.C_)(ie.listViewLiDiv)},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,m),[[a.nr,e.category]]),g,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,w),[[a.nr,e.amount]])],2),(0,l._)("button",{onClick:t=>re.removeExpense(e)},"X",8,h)],10,_)))),128))],2)],2)))),128))])],2),(0,l._)("div",null,[(0,l._)("ul",{class:(0,s.C_)(ie.newUlStyle)},[(0,l._)("li",null,[C,(0,l._)("select",{class:(0,s.C_)(ie.categoryStyle),value:ie.selectedCategory,onChange:t[0]||(t[0]=e=>re.updateSelectbox(e))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortLevel2,((e,t)=>((0,l.wg)(),(0,l.iD)("option",{key:t,value:e.category},(0,s.zw)(e.category),9,x)))),128))],42,v)]),(0,l._)("li",null,[E,(0,l._)("form",{onSubmit:t[3]||(t[3]=(0,a.iM)((e=>re.addExpenseListView()),["prevent"]))},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t[1]||(t[1]=e=>ie.newCategory=e),placeholder:"새 리스트 적기"},null,2),[[a.nr,ie.newCategory]]),f,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[2]||(t[2]=e=>ie.newAmount=e),placeholder:"0"},null,2),[[a.nr,ie.newAmount]]),S],32)])],2),(0,l._)("ul",{class:(0,s.C_)(ie.newUlStyle)},[(0,l._)("li",null,[(0,l._)("form",{onSubmit:t[5]||(t[5]=(0,a.iM)((e=>re.addCategory()),["prevent"]))},[V,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t[4]||(t[4]=e=>ie.newCategoryList=e),placeholder:"새 카테고리 적기"},null,2),[[a.nr,ie.newCategoryList]]),U],32)])],2)])],2),(0,l._)("div",{class:(0,s.C_)(ie.flowViewDiv)},[D,(0,l._)("div",{class:(0,s.C_)(ie.unitDiv)},[(0,l._)("div",{class:(0,s.C_)(ie.graphGrid)},[(0,l._)("div",null,[b,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortTotalExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[k,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,P),[[a.nr,e.amount]])])))),128)),(0,l._)("li",null,[O,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[6]||(t[6]=e=>re.sumTotalExpenses=e),readonly:""},null,2),[[a.nr,re.sumTotalExpenses]])])])]),(0,l._)("div",{class:(0,s.C_)(ie.graphDiv)},[(0,l.Wm)(ue,{expenses:ie.expenses},null,8,["expenses"])],2)],2)],2),(0,l._)("div",{class:(0,s.C_)(ie.subGrid)},[(0,l._)("div",{class:(0,s.C_)(ie.unitDiv)},[(0,l._)("div",null,[L,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortPastExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[A,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,N),[[a.nr,e.amount]])])))),128)),(0,l._)("li",null,[(0,l.Uk)("계산값 : "),(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[7]||(t[7]=e=>re.sumPastExpenses=e),readonly:""},null,2),[[a.nr,re.sumPastExpenses]])])])]),(0,l._)("div",null,[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortParentsPastExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,H),[[a.nr,e.category]]),Y,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,K),[[a.nr,e.amount]]),(0,l._)("button",{onClick:t=>re.removeExpense(e)},"X",8,G)])))),128))]),(0,l._)("ul",{class:(0,s.C_)(ie.newUlStyle)},[(0,l._)("li",null,[(0,l._)("form",{onSubmit:t[10]||(t[10]=(0,a.iM)((e=>re.addExpense("past")),["prevent"]))},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t[8]||(t[8]=e=>ie.newCategory_past=e),placeholder:"새 리스트 적기"},null,2),[[a.nr,ie.newCategory_past]]),F,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[9]||(t[9]=e=>ie.newAmount_past=e),placeholder:"0"},null,2),[[a.nr,ie.newAmount_past]]),I],32)])],2)])],2),(0,l._)("div",{class:(0,s.C_)(ie.unitDiv)},[(0,l._)("div",null,[J,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortPresentExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[M,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,T),[[a.nr,e.amount]])])))),128)),(0,l._)("li",null,[(0,l.Uk)("계산값 : "),(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[11]||(t[11]=e=>re.sumPresentExpenses=e),readonly:""},null,2),[[a.nr,re.sumPresentExpenses]])])])]),(0,l._)("div",null,[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortParentsPresentExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,X),[[a.nr,e.category]]),q,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,Z),[[a.nr,e.amount]]),(0,l._)("button",{onClick:t=>re.removeExpense(e)},"X",8,j)])))),128))]),(0,l._)("ul",{class:(0,s.C_)(ie.newUlStyle)},[(0,l._)("li",null,[(0,l._)("form",{onSubmit:t[14]||(t[14]=(0,a.iM)((e=>re.addExpense("present")),["prevent"]))},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t[12]||(t[12]=e=>ie.newCategory_present=e),placeholder:"새 리스트 적기"},null,2),[[a.nr,ie.newCategory_present]]),z,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[13]||(t[13]=e=>ie.newAmount_present=e),placeholder:"0"},null,2),[[a.nr,ie.newAmount_present]]),R],32)])],2)])],2),(0,l._)("div",{class:(0,s.C_)(ie.unitDiv)},[(0,l._)("div",null,[W,(0,l._)("ul",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortFutureExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[B,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t,placeholder:"0"},null,10,Q),[[a.nr,e.amount]])])))),128)),(0,l._)("li",null,[(0,l.Uk)("계산값 : "),(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[15]||(t[15]=e=>re.sumFutureExpenses=e),readonly:""},null,2),[[a.nr,re.sumFutureExpenses]])])])]),(0,l._)("div",null,[(0,l._)("ol",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(re.sortParentsFutureExpenses,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t=>e.category=t},null,10,$),[[a.nr,e.category]]),ee,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t=>e.amount=t},null,10,te),[[a.nr,e.amount]]),(0,l._)("button",{onClick:t=>re.removeExpense(e)},"X",8,ne)])))),128))]),(0,l._)("ul",{class:(0,s.C_)(ie.newUlStyle)},[(0,l._)("li",null,[(0,l._)("form",{onSubmit:t[18]||(t[18]=(0,a.iM)((e=>re.addExpense("future")),["prevent"]))},[(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.categoryStyle),"onUpdate:modelValue":t[16]||(t[16]=e=>ie.newCategory_future=e),placeholder:"새 리스트 적기"},null,2),[[a.nr,ie.newCategory_future]]),le,(0,l.wy)((0,l._)("input",{class:(0,s.C_)(ie.amountStyle),"onUpdate:modelValue":t[17]||(t[17]=e=>ie.newAmount_future=e),placeholder:"0"},null,2),[[a.nr,ie.newAmount_future]]),se],32)])],2)])],2)],2)],2)],2),(0,l._)("div",{class:(0,s.C_)(ie.saveEditedDiv)},[(0,l._)("button",{class:(0,s.C_)({saveEditedStyle_active:!0===re.isEdited,saveEditedStyle_inactive:!1===re.isEdited}),disabled:!re.isEdited,onClick:t[19]||(t[19]=(...e)=>re.editExpenses&&re.editExpenses(...e))},"편집한 내용 저장",10,ae),(0,l._)("button",{class:(0,s.C_)({cancelEditedStyle_active:!0===re.isEdited,cancelEditedStyle_inactive:!1===re.isEdited}),disabled:!re.isEdited,onClick:t[20]||(t[20]=(...e)=>re.cancelEditing&&re.cancelEditing(...e))},"편집 취소",10,oe)],2)],64)}n(7658),n(3767),n(8585),n(8696);var re=n(3786),ue=n(2761),de={data(){return{expenses:[],fetchedExpenses:[],selectedCategory:"",selectboxFirst:null,newCategoryList:"",newCategory:"",newCategory_past:"",newCategory_present:"",newCategory_future:"",newAmount:"",newAmount_past:"",newAmount_present:"",newAmount_future:"",unitDiv:"unitDiv",subGrid:"subGrid",graphGrid:"graphGrid",graphDiv:"graphDiv",sectionGrid:"sectionGrid",flowViewDiv:"flowViewDiv",listViewDiv:"listViewDiv",listViewItemDiv:"listViewItemDiv",listViewLiDiv:"listViewLiDiv",categoryStyle:"categoryStyle",amountStyle:"amountStyle",newUlStyle:"newUlStyle",saveEditedStyle_active:"saveEditedStyle_active",saveEditedStyle_inactive:"saveEditedStyle_inactive",cancelEditedStyle_active:"cancelEditedStyle_active",cancelEditedStyle_inactive:"cancelEditedStyle_inactive",saveEditedDiv:"saveEditedDiv",listViewLiStyle:"listViewLiStyle",listViewOlStyle:"listViewOlStyle",isEditValue:!0}},mounted(){this.fetchData(),this.monitorIsEdited()},computed:{sortLevel2(){return this.expenses.filter((e=>2===e.level))},sortLevel3(){return this.expenses.filter((e=>3===e.level))},sortTotalExpenses(){return this.expenses.filter((e=>"total"===e.category))},sortPastExpenses(){return this.expenses.filter((e=>"past"===e.category))},sortPresentExpenses(){return this.expenses.filter((e=>"present"===e.category))},sortFutureExpenses(){return this.expenses.filter((e=>"future"===e.category))},sortParentsPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory))},sortParentsPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory))},sortParentsFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory))},sumTotalExpenses(){return this.expenses.filter((e=>"total"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},sumPastExpenses(){return this.expenses.filter((e=>"past"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},sumPresentExpenses(){return this.expenses.filter((e=>"present"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},sumFutureExpenses(){return this.expenses.filter((e=>"future"===e.parentsCategory)).reduce(((e,t)=>e+Number(t.amount)),0)},isEdited(){const e=[];this.fetchedExpenses.forEach((t=>{e.push({category:t.category,amount:Number(t.amount)})}));const t=[];this.expenses.forEach((e=>{t.push({category:e.category,amount:Number(e.amount)})}));const n=JSON.stringify(e),l=JSON.stringify(t),s=(n||"")!=(l||"");return s}},methods:{sumExpenses(e){console.log("category =",e);const t=this.expenses.filter((t=>t.parentsCategory===e)).reduce(((e,t)=>e+Number(t.amount)),0);return console.log("sum = ",t),[t]},updateSelectbox(e){this.selectedCategory=e.target.value,console.log("this.selectedCategory = ",this.selectedCategory)},addCategory(){const e={id:this.getUuidv4(),parentsCategory:"total",category:this.newCategoryList,amount:null,order:this.setOrder("categories"),level:2};this.expenses.push(e),this.newCategory=""},sortExpenses(e){return this.expenses.filter((t=>t.category===e))},getLiId(e){return e},filteredExpenses(e){return this.expenses.filter((t=>t.parentsCategory===e))},monitorIsEdited(){this.isEdited?this.isEditValue=!0:this.isEditValue=!1},addExpenseListView(){if(this.selectedCategory){const e={id:this.getUuidv4(),parentsCategory:this.selectedCategory,category:this.newCategory,amount:this.newAmount,order:this.setOrder(this.selectedCategory),level:3};this.expenses.push(e),this.newCategory="",this.newAmount=""}else alert("상위폴더를 선택해주시기 바랍니다.")},addExpense(e){const t={id:this.getUuidv4(),parentsCategory:e,category:this["newCategory_"+e],amount:this["newAmount_"+e],order:this.setOrder(e),level:3};this.expenses.push(t),this["newCategory_"+e]="",this["newAmount_"+e]=""},async insertData(e){try{const{error:t}=await re.O.from("expense").insert(e);if(t)throw t}catch(t){console.error(t)}},async fetchData(){const e=await re.O.from("expense").select().order("order",{ascending:!0}),{data:t}=e;this.expenses=t,this.fetchedExpenses=JSON.parse(JSON.stringify(t))},removeExpense(e){const t=confirm("내용을 삭제하시겠습니까? 삭제 후, '저장'버튼을 눌러야 삭제가 완료됩니다.");if(t){const t=e.parentsCategory,n=e.order;this.expenses.forEach((e=>{const l=e.order;e.parentsCategory==t&&l>n&&(this.expenses[this.expenses.indexOf(e)].order=l-1)})),this.expenses=this.expenses.filter((t=>t!==e)),2==e.level&&(this.expenses=this.expenses.filter((t=>t.parentsCategory!==e.category)))}},pointEditedData(){},editExpenses(){const e=confirm("수정된 내용을 저장하시겠습니까?");if(e){const e=this.expenses.map((e=>e.id)),t=this.fetchedExpenses.map((e=>e.id)),n=t.filter((t=>!e.includes(t)));n.forEach((e=>this.deleteData(e))),this.expenses.forEach((e=>this.upsertData(e))),this.fetchedExpenses=JSON.parse(JSON.stringify(this.expenses)),alert("저장되었습니다.")}},async upsertData(e){try{const{error:t}=await re.O.from("expense").upsert(e).eq("id",e.id);if(t)throw t}catch(t){console.error(t)}},async deleteData(e){try{const{error:t}=await re.O.from("expense").delete().eq("id",e);if(t)throw t}catch(t){console.error(t)}},getUuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))},setOrder(e){const t=this.expenses.filter((t=>t.parentsCategory===e)),n=Object.keys(t).length;return n+1},cancelEditing(){const e=confirm("편집을 취소하시겠습니까? 취소하면, 편집 중인 내용은 저장되지 않습니다.");e&&(this.expenses="",this.expenses=JSON.parse(JSON.stringify(this.fetchedExpenses)))}},components:{PieChart:ue.Z}},pe=n(89);const ce=(0,pe.Z)(de,[["render",ie],["__scopeId","data-v-3f6707f8"]]);var ye=ce}}]);
//# sourceMappingURL=544.b7bbb232.js.map